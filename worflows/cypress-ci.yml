name: Cypress Tests


on:
push:
branches: [ 'main' ]
pull_request:


jobs:
cypress-run:
runs-on: ubuntu-latest


steps:
- name: Checkout
uses: actions/checkout@v4


- name: Setup Node
uses: actions/setup-node@v4
with:
node-version: '18'


- name: Install dependencies
run: npm ci


- name: Run Cypress tests
run: npx cypress run --browser chrome
env:
CYPRESS_BASE_URL: https://www.saucedemo.com


- name: Upload Cypress videos
if: always()
uses: actions/upload-artifact@v4
with:
name: cypress-videos
path: cypress/videos


- name: Upload Cypress screenshots
if: always()
uses: actions/upload-artifact@v4
with:
name: cypress-screenshots
path: cypress/screenshots